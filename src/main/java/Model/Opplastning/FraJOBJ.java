
package Model.Opplastning;

//import Model.Lagring.TilJOBJ;
import Model.Avvik.InvalidJavaObjectFormatException;
import Model.Domene.Artist;
import Model.Registrering.Register;
import java.io.EOFException;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.util.ArrayList;
import java.util.List;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;




public class FraJOBJ extends OpplastingSystem {
    
   // Register register=Register.getInstance();
    
    private File file;
    private Register register;
    
    
    public FraJOBJ(File file){
        super(file);
    }
    
    public boolean sjekkDuplikat(Object obj, String valgt){
         ArrayList<Artist> test=null;
        switch(valgt){
                case "Artist":
                    System.out.println("inne i swtich");
                  //  register.test();                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
                 test=register.getArtister();
                for (int i=0;i<test.size();i++){
                    if (test.get(i).equals((Artist)obj)){
                        System.out.println("Match funnet");
                     }
                    
                 }
                 return false;
                    // break;
                  
                case "Lokale":
                  
                      break;
            
                case "Arrangement":
           
                    break;
            
                 case "KontaktPerson":
                    
                     break;
            
                    case "Billett":
              
                         break;
            }
        return false;
    }
    
    public void registrerFraFil(ObservableList<Object> data){
           for (Object obj : data){
             /*  if (!sjekkDuplikat(obj, "Artist")){*/
                    register.registrer(obj);
              // }
              
           }
     
    }
    
    
   
    public ObservableList<Object> ReadObjectsFromFile(String filepath) throws ClassNotFoundException, EOFException, IOException, InvalidJavaObjectFormatException  {
        //Object obj=null;
 //ObservableList<Object> objekter=FXCollections.observableArrayList();
 //ObservableList<Lokale> objekter=FXCollections.observableArrayList();


  

        try {
            
            FileInputStream fileIn = new FileInputStream(filepath);
            ObjectInputStream objectIn = new ObjectInputStream(fileIn);
            List<Object> objekter=(List<Object>)objectIn.readObject();
         //  objekter=(ObservableList<Lokale>)objectIn.readObject();
       
       ObservableList<Object> liste=FXCollections.observableArrayList(objekter);
       if (liste.get(0)==null){
           throw new InvalidJavaObjectFormatException("Ugydlig javaobject fil");
       }
      return liste;
        }
        catch(EOFException e){
            System.err.println(e.getMessage());
        }
 catch (IOException e){
         System.err.println(e.getMessage());
   }
        catch(ClassCastException e){
            System.err.println(e.getMessage());
        }
      
//      ObservableList<Object> liste=FXCollections.observableArrayList(objekter);
//return liste;
      return null;
    }
    
   }
        
    
